# Docker Compose Environment Configuration for Media Server and Torrent Management
# Copy this file to .env and update with your specific values

# Network Configuration
# Define the subnet for your Docker network to avoid conflicts
MEDIA_NETWORK_SUBNET=10.244.0.0/16
VPN_NETWORK_SUBNET=10.233.0.0/16

# VPN Configuration - Modular Provider System
# Choose your VPN provider: warp, pia, or none
# Default: warp (Cloudflare WARP - no credentials needed)
# Example: To switch to PIA, change to VPN_PROVIDER=pia and set PIA credentials below
VPN_PROVIDER=warp

# Provider-agnostic VPN settings (apply to all providers)
VPN_ENABLED=true
VPN_KILL_SWITCH=true
VPN_HEALTH_CHECK_INTERVAL=30s
VPN_CONFIG_PATH=./config/vpn

# WARP VPN Configuration (only used when VPN_PROVIDER=warp)
# WARP works without credentials, but you can optionally provide a license key
WARP_LICENSE_KEY=

# PIA VPN Configuration (only used when VPN_PROVIDER=pia)
# SECURITY NOTE: Required for PIA provider
PIA_USER=your_pia_username_here
PIA_PASS=your_pia_password_here
PIA_REGION=us_atlanta
PORT_FORWARDING=1
LOCAL_NETWORK=192.168.1.0/24

# Media Server Configuration
# SECURITY NOTE: Plex claim token is temporary and generated during setup
PLEX_CLAIM_TOKEN=
PLEX_EXTERNAL_PORT=32400
PLEX_USERNAME=
PLEX_SERVER_NAME=PlexServer

# Plex Authentication (required for watchlistarr)
# Watchlistarr automatically detects authentication - usually no manual setup needed!

# Plex Server Location (automatic detection)
# Only change if your Plex server is on a different host
PLEX_HOST=docker-host
PLEX_PORT=32400

# Authentication Methods (priority order):
# 1. AUTOMATIC: Leverages your existing Plex login (RECOMMENDED - zero config!)
# 2. CREDENTIALS: Traditional username/password (fully automated)
# 3. MANUAL TOKEN: For social sign-on users (one-time setup)

# Method 2: Traditional Plex Account (fully automated backup)
# If you created your Plex account with email/password (not social sign-on)
PLEX_USERNAME=your-plex-username
PLEX_PASSWORD=your-plex-password

# Method 3: Social Sign-On Users (manual token fallback)
# If automatic detection fails and you use Google/Facebook/Apple sign-in
# Get your token from: https://plex.tv/claim or Plex Settings > Network > Show Advanced
PLEX_TOKEN=your-plex-token-here



# qBittorrent Configuration
# SECURITY NOTE: These passwords will be generated securely at runtime if not provided
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=
QBITTORRENT_PORT=8080

# Web UI Configuration
WEB_UI_PORT=8787

# Volume Paths
# Use absolute paths for persistent data storage
MEDIA_ROOT=./data/media
DOWNLOADS_ROOT=./data/downloads
CONFIG_ROOT=./config

# Timezone Configuration
TZ=America/New_York

# Optional: Firewall and Security
# Enable or disable specific service exposures
EXPOSE_PLEX=true
EXPOSE_QBITTORRENT=false

# Logging Configuration
LOG_LEVEL=info
LOG_MAX_SIZE=10m
LOG_MAX_FILE=3

# VPN Network Buffer Configuration
# Prevents "No buffer space available" errors that crash the VPN daemon
# Adjust based on your system's available RAM and torrent activity

# VPN Container Resources (Default: 8GB RAM systems)
VPN_MEMORY_LIMIT=1g                    # Memory limit for VPN container
VPN_MAX_FILE_DESCRIPTORS=32768         # Max open sockets/files (affects torrent connections)
VPN_NETWORK_BUFFER_SIZE=67108864       # 64MB network buffers (receive/send)
VPN_MAX_CONNECTIONS=5000               # Max concurrent network connections

# API Configuration
NODE_ENV=production
API_BASE_URL=http://localhost
PROWLARR_URL=http://prowlarr:9696
QBITTORRENT_URL=http://172.28.0.2:8080
PLEX_URL=http://plex:32400
FLARESOLVERR_URL=http://flaresolverr:8191

# API Keys - Generated Automatically at Runtime
# SECURITY NOTE: These will be generated securely during container initialization
PROWLARR_API_KEY=2feed2fe71424878bb7945ead222f367
SONARR_API_KEY=624fe2507ddb4a8bbf1d8924b0e07b17
RADARR_API_KEY=21861064a2834ef08f7c2f26957af672

# Service Instance Names
SONARR_INSTANCE_NAME=Sonarr
RADARR_INSTANCE_NAME=Radarr
PROWLARR_INSTANCE_NAME=Prowlarr
OVERSEERR_INSTANCE_NAME=Overseerr

# Jellyfin Configuration
JELLYFIN_PORT=8096
JELLYFIN_URL=http://localhost:8096
JELLYFIN_BACKEND_URL=http://jellyfin:8096
JELLYFIN_API_KEY=

# Overseerr Configuration
OVERSEERR_URL=http://overseerr:5055
OVERSEERR_CLIENT_ID=
OVERSEERR_VAPID_PRIVATE=
OVERSEERR_VAPID_PUBLIC=

# Autoscan Configuration
AUTOSCAN_PORT=3030
AUTOSCAN_WEBHOOK_TOKEN=autoscan

# Authentication Configuration
AUTH_METHOD=None
AUTH_REQUIRED=DisabledForLocalAddresses

# Next.js Configuration
NEXT_TELEMETRY_DISABLED=1

# Worktree isolation and Port Configuration
CONTAINER_PREFIX=
VPN_BITTORRENT_PORT=17403
FLARESOLVERR_PORT=17571
NGINX_QBITTORRENT_PORT=11126
PROWLARR_PORT=9696
RADARR_PORT=7878
SONARR_PORT=8989



# PIA_WIREGUARD_PORT=22995
# PIA_FLARESOLVERR_PORT=22322
# PIA_PROWLARR_PORT=11516

OVERSEERR_PORT=5055
VPN_IP_ADDRESS=10.233.0.2

# SECURITY NOTES:
# 1. Copy this file to .env before first use
# 2. API keys and passwords will be generated automatically
# 3. VPN provider selection: Set VPN_PROVIDER=warp (no credentials) or VPN_PROVIDER=pia (requires credentials)
# 4. PIA credentials should be updated with your actual PIA account details if using PIA provider
# 5. Plex claim token is temporary - get from https://plex.tv/claim
# 6. Never commit the .env file to version control


# Autoheal Configuration
# Controls how autoheal monitors and restarts containers
AUTOHEAL_INTERVAL=5                # Check container health every 5 seconds
AUTOHEAL_START_PERIOD=60           # Wait 60 seconds after container start before monitoring
AUTOHEAL_DEFAULT_STOP_TIMEOUT=10   # Graceful stop timeout before killing container


